digraph {
  rankdir=LR;
  splines=polyline;
  nodesep=0.8;
  ranksep=1.0;
  bgcolor="transparent";
  pad=1.0;

  node [shape=box, style="rounded,filled", fillcolor="#2d2d2d", color="#b39ddb", fontcolor="#e0e0e0", fontname="Inter, SF Pro Display, -apple-system, BlinkMacSystemFont, Segoe UI, Roboto, sans-serif", fontsize=12, margin="0.4,0.3"];
  edge [fontname="Inter, SF Pro Display, -apple-system, BlinkMacSystemFont, Segoe UI, Roboto, sans-serif", fontsize=9, color="#b0b0b0"];

  subgraph cluster_Session {
    label="Session";
    fontname="Inter, SF Pro Display, -apple-system, BlinkMacSystemFont, Segoe UI, Roboto, sans-serif";
    fontsize=14;
    fontcolor="#e0e0e0";
    style="rounded";
    color="#b39ddb";
    bgcolor="#1e1e1e";
    margin=24;

    Active;
    Expired;

    Active -> Expired;
  }

  subgraph cluster_AuthFlow {
    label="AuthFlow";
    fontname="Inter, SF Pro Display, -apple-system, BlinkMacSystemFont, Segoe UI, Roboto, sans-serif";
    fontsize=14;
    fontcolor="#e0e0e0";
    style="rounded";
    color="#b39ddb";
    bgcolor="#1e1e1e";
    margin=24;

    Pending;
    Authenticated;
    Failed;

    Pending -> Authenticated;
    Pending -> Failed;
  }

  // Bridges (cross-typestate)
  Authenticated -> Active [style=dashed, color="#b39ddb", penwidth=1.5];
  Failed -> Expired [style=dashed, color="#b39ddb", penwidth=1.5];
}
